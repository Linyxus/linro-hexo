---
title: 快速读取整数
date: 2017-03-04 20:10:03
tags:
- C++
- other
categories:
- Noip
---
## 原因
可能大家都知道，在读数据的时候，`scanf`较之`cin`快上很多。但当某些题目数据量达到**百万**级别，就算使用scanf也太慢了。一共一秒钟的时间，读取数据都要用去大半。
## 解决方法
当读取整数时，我们可以手动的读取字符，组成数字。这样速度将有巨大的提升。
<!--more-->

## 原理
`<cstdio>`库中有一个`readchar()`函数，读入一个字符，速度非常快。

我们将利用这一点快速的手动读入整数。

由于原理很简单，不多做阐述。
## 实现
### 代码
```C++
void unsigned_qread(int& d)
{
    d = 0;
    char ch = getchar();
    while (ch < '0' || ch > '9')
        ch = getchar();
    while (ch >= '0' && ch <= '9')
        d = d * 10 + ch - '0';
}
```
### 不足之处
只可以读取**正整数**，不过已经可以满足大部分使用的需要了。
### 测试
我写了一段代码测试比较`scanf`，`cin`，`qread`的速度。

![f_3146.png](http://linfile.xyz/data/vip_data/f_3146.png)

可以看到，手动读取整数比其他两种快得多。通过这个方法，可以有效的避免数据量大的题目由于读取数据而造成的TLE。
```>)
}</cstdio>`
